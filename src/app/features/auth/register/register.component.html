<div class="register-container">
  <img src="/assets/images/logo.png" alt="FitZone Logo" class="logo">

  <div class="register-card">
    <h2>Registro</h2>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <!-- First Name -->
      <div class="form-group">
        <label for="firstName">Nombre</label>
        <input type="text" id="firstName" formControlName="firstName" placeholder="Tu nombre">
        <div class="error-message" *ngIf="registerForm.get('firstName')?.touched && registerForm.get('firstName')?.invalid">
          <span *ngIf="registerForm.get('firstName')?.errors?.['required']">El nombre es requerido</span>
          <span *ngIf="registerForm.get('firstName')?.errors?.['minlength'] || registerForm.get('firstName')?.errors?.['maxlength']">
            Debe tener entre 2 y 100 caracteres
          </span>
        </div>
      </div>

      <!-- Last Name -->
      <div class="form-group">
        <label for="lastName">Apellido</label>
        <input type="text" id="lastName" formControlName="lastName" placeholder="Tu apellido">
        <div class="error-message" *ngIf="registerForm.get('lastName')?.touched && registerForm.get('lastName')?.invalid">
          <span *ngIf="registerForm.get('lastName')?.errors?.['required']">El apellido es requerido</span>
          <span *ngIf="registerForm.get('lastName')?.errors?.['minlength'] || registerForm.get('lastName')?.errors?.['maxlength']">
            Debe tener entre 2 y 100 caracteres
          </span>
        </div>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email">Correo Electrónico</label>
        <input type="email" id="email" formControlName="email" placeholder="tu@email.com">
        <div class="error-message" *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
          <span *ngIf="registerForm.get('email')?.errors?.['required']">El correo es requerido</span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">Correo inválido</span>
        </div>
      </div>

      <!-- Document Type -->
      <div class="form-group">
        <label for="documentType">Tipo de Documento</label>
        <select id="documentType" formControlName="documentType">
          <option value="" disabled>Selecciona un tipo</option>
          <option *ngFor="let dt of documentTypes" [value]="dt">{{ dt }}</option>
        </select>
        <div class="error-message" *ngIf="registerForm.get('documentType')?.touched && registerForm.get('documentType')?.invalid">
          Debes seleccionar un tipo de documento
        </div>
      </div>

      <!-- Document Number -->
      <div class="form-group">
        <label for="documentNumber">Número de Documento</label>
        <input type="text" id="documentNumber" formControlName="documentNumber" placeholder="Número de documento">
        <div class="error-message" *ngIf="registerForm.get('documentNumber')?.touched && registerForm.get('documentNumber')?.invalid">
          <span *ngIf="registerForm.get('documentNumber')?.errors?.['required']">Número de documento requerido</span>
          <span *ngIf="registerForm.get('documentNumber')?.errors?.['pattern']">Número inválido</span>
        </div>
      </div>

      <!-- Password -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" formControlName="password" placeholder="********">
        <div class="error-message" *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
          <span *ngIf="registerForm.get('password')?.errors?.['required']">La contraseña es requerida</span>
          <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Debe tener al menos 8 caracteres</span>
          <span *ngIf="registerForm.get('password')?.errors?.['pattern']">Debe incluir mayúscula, minúscula, número y carácter especial</span>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="form-group">
        <label for="confirmPassword">Confirmar Contraseña</label>
        <input type="password" id="confirmPassword" formControlName="confirmPassword" placeholder="********">
        <div class="error-message" *ngIf="registerForm.errors?.['passwordMismatch'] && registerForm.get('confirmPassword')?.touched">
          Las contraseñas no coinciden
        </div>
      </div>

      <!-- Phone Number -->
      <div class="form-group">
        <label for="phoneNumber">Teléfono</label>
        <input type="tel" id="phoneNumber" formControlName="phoneNumber" placeholder="Número de teléfono">
        <div class="error-message" *ngIf="registerForm.get('phoneNumber')?.touched && registerForm.get('phoneNumber')?.invalid">
          Teléfono inválido
        </div>
      </div>

      <!-- Emergency Contact -->
      <div class="form-group">
        <label for="emergencyContactPhone">Teléfono de Emergencia</label>
        <input type="tel" id="emergencyContactPhone" formControlName="emergencyContactPhone" placeholder="Número de emergencia">
        <div class="error-message" *ngIf="registerForm.get('emergencyContactPhone')?.touched && registerForm.get('emergencyContactPhone')?.invalid">
          Número de emergencia inválido
        </div>
      </div>

      <!-- Birth Date -->
      <div class="form-group">
        <label for="birthDate">Fecha de Nacimiento</label>
        <input type="date" id="birthDate" formControlName="birthDate">
        <div class="error-message" *ngIf="registerForm.get('birthDate')?.touched && registerForm.get('birthDate')?.invalid">
          Fecha requerida
        </div>
      </div>

      <!-- Medical Conditions -->
      <div class="form-group">
        <label for="medicalConditions">Condiciones Médicas</label>
        <textarea id="medicalConditions" formControlName="medicalConditions" placeholder="Escribe tus condiciones médicas (si tienes)"></textarea>
      </div>

      <!-- Main Location -->
      <div class="form-group">
        <label for="mainLocationId">Sede Principal</label>
        <select id="mainLocationId" formControlName="mainLocationId">
          <option value="" disabled>Selecciona una sede</option>
          <option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</option>
        </select>
        <div class="error-message" *ngIf="registerForm.get('mainLocationId')?.touched && registerForm.get('mainLocationId')?.invalid">
          Debes seleccionar una sede
        </div>
      </div>

      <!-- Role -->
      <div class="form-group">
        <label for="role">Rol</label>
        <select id="role" formControlName="role">
          <option value="" disabled>Selecciona un rol</option>
          <option value="MEMBER">Miembro</option>
          <option value="INSTRUCTOR">Instructor</option>
        </select>
        <div class="error-message" *ngIf="registerForm.get('role')?.touched && registerForm.get('role')?.invalid">
          Debes seleccionar un rol
        </div>
      </div>

      <!-- Terms -->
      <div class="terms-group">
        <input type="checkbox" id="acceptTerms" formControlName="acceptTerms">
        <label for="acceptTerms">
          Acepto los <a href="/terms">términos y condiciones</a> y la <a href="/privacy">política de privacidad</a>
        </label>
      </div>

      <button type="submit" class="submit-button" [disabled]="isSubmitting">Registrarse</button>
    </form>

    <div class="login-link">
      ¿Ya tienes una cuenta? 
      <a (click)="navigateToLogin()">Inicia sesión aquí</a>
    </div>
  </div>
</div>
